## -*- coding: utf-8 -*-

<%def name="html_tags(post)">
    %if post.tags:
        <ul itemprop="keywords" class="tags">
        %for tag in post.tags:
          % if tag not in hidden_tags:
            <li><a class="tag p-category" href="${_link('tag', tag)}" rel="tag">${tag|h}</a></li>
          % endif
        %endfor
        </ul>
    %endif
</%def>

<%def name="open_graph_metadata(post)">
<meta property="og:site_name" content="${blog_title|h}">
<meta property="og:title" content="${post.title()[:70]|h}">
<meta property="og:url" content="${abs_link(permalink)}">
%if post.description():
    <meta property="og:description" content="${post.description()[:200]|h}">
%else:
    <meta property="og:description" content="${post.text(strip_html=True)[:200]|h}">
%endif
%if post.previewimage:
    <meta property="og:image" content="${url_replacer(permalink, post.previewimage, lang, 'absolute')}">
%endif
<meta property="og:type" content="article">
### Will only work with Pintrest and breaks everywhere else who expect a [Facebook] URI.
###    %if post.author():
###    <meta property="article:author" content="${post.author()|h}">
###    %endif
%if post.date.isoformat():
    <meta property="article:published_time" content="${post.formatted_date('webiso')}">
%endif
%if post.tags:
    %for tag in post.tags:
       <meta property="article:tag" content="${tag|h}">
    %endfor
%endif
</%def>
