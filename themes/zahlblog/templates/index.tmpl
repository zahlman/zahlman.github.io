## -*- coding: utf-8 -*-
<%namespace name="helper" file="index_helper.tmpl"/>
<%namespace name="pagination" file="pagination_helper.tmpl"/>
<%inherit file="base.tmpl"/>

<%block name="extra_head">
    ${parent.extra_head()}
    ## On the main index, ask the browser to prefetch the most recent post.
    % if posts and (permalink == '/' or permalink == '/' + index_file):
        <link rel="prefetch" href="${posts[0].permalink()}" type="text/html">
    % endif
</%block>

<%block name="content">
    <%block name="content_header">
        ## Potentially overridden.
        <h1>All Posts</h1>
    </%block>
    % if page_links:
        ${pagination.page_navigation(current_page, page_links, prevlink, nextlink, prev_next_links_reversed)}
    % endif
    <div class="postindex">
        % for post in posts:
            ${helper.index_entry(post)}
            %if not loop.last:
                <hr>
            %endif
        % endfor
    </div>
    ${helper.html_pager()}
</%block>

## Removed "before_content" block, used to "feature" posts.
