## -*- coding: utf-8 -*-
<%namespace name="helper" file="index_helper.tmpl"/>
<%namespace name="pagination" file="pagination_helper.tmpl"/>
<%inherit file="base.tmpl"/>

<%block name="extra_head">
    ${parent.extra_head()}
    ## On the main index, ask the browser to prefetch the most recent post.
    % if posts and (permalink == '/' or permalink == '/' + index_file):
        <link rel="prefetch" href="${posts[0].permalink()}" type="text/html">
    % endif
</%block>

<%block name="content">
    <%block name="content_header">
        ## Potentially overridden.
        <h1>All Posts</h1>
    </%block>

    ${pagination.page_navigation(current_page, page_links, prevlink, nextlink)}
    <div class="postindex">
        % for post in posts:
            ${helper.post_content(post, True)}
            %if not loop.last:
                <hr>
            %endif
        % endfor
    </div>
    ${pagination.page_navigation(current_page, page_links, prevlink, nextlink)}
    <br>
</%block>

## Removed "before_content" block, used to "feature" posts.
